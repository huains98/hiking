<script lang="ts" setup>
import { computed, ref } from 'vue';
import { MapPin, Compass, TrendingUp, Heart, Share2 } from 'lucide-vue-next'

const filterOptions = ref([
    { value: 'all', label: 'å…¨éƒ¨' },
    { value: 'easy', label: 'ç®€å•', color: 'text-green-600' },
    { value: 'medium', label: 'ä¸­ç­‰', color: 'text-orange-600' },
    { value: 'hard', label: 'é«˜éš¾åº¦', color: 'text-red-600' }
])

const routes = ref([
    {
        id: 1,
        image: 'ğŸ”ï¸',
        title: 'æ¢…é‡Œé›ªå±±å¤§ç¯çº¿',
        difficulty: 'é«˜éš¾åº¦',
        difficultyLevel: 'hard',
        days: '8å¤©',
        distance: '120km',
        altitude: '4200m',
        author: 'å±±é‡è¡Œè€…',
        avatar: 'ğŸ‘¨',
        likes: 1243,
        views: 8921,
        location: 'äº‘å—Â·å¾·é’¦',
        season: '10-11æœˆ'
    },
    {
        id: 2,
        image: 'ğŸŒ²',
        title: 'ç¨»åŸäºšä¸å¾’æ­¥è·¯çº¿',
        difficulty: 'ä¸­ç­‰',
        difficultyLevel: 'medium',
        days: '5å¤©',
        distance: '65km',
        altitude: '4500m',
        author: 'äº‘æ¸¸å››æµ·',
        avatar: 'ğŸ‘©',
        likes: 2156,
        views: 12453,
        location: 'å››å·Â·ç¨»åŸ',
        season: '4-5æœˆ,9-10æœˆ'
    },
    {
        id: 3,
        image: 'â›°ï¸',
        title: 'æ­¦åŠŸå±±å…¨ç¨‹ç©¿è¶Š',
        difficulty: 'ä¸­ç­‰',
        difficultyLevel: 'medium',
        days: '3å¤©',
        distance: '45km',
        altitude: '1918m',
        author: 'å¾’æ­¥è¾¾äºº',
        avatar: 'ğŸ§‘',
        likes: 1876,
        views: 9654,
        location: 'æ±Ÿè¥¿Â·èä¹¡',
        season: 'å…¨å¹´',
        description: 'æ­¦åŠŸå±±ä½äºæ±Ÿè¥¿çœä¸­è¥¿éƒ¨ï¼Œå±…ç½—éœ„å±±è„‰åŒ—æ”¯ï¼Œç»µå»¶120å…¬é‡Œï¼Œä¸»å³°ç™½é¹¤å³°æµ·æ‹”1918.3ç±³ã€‚æ­¦åŠŸå±±ä»¥è‰ç”¸å¥‡è§‚é—»åï¼Œ10ä¸‡äº©é«˜å±±è‰ç”¸ç»µç»µäºæµ·æ‹”1600å¤šç±³çš„é«˜å±±ä¹‹å·…ï¼Œç©¿äº‘å…¥é›¾ã€‚',
        highlights: ['é«˜å±±è‰ç”¸', 'äº‘æµ·æ—¥å‡º', 'é‡‘é¡¶æ ˆé“', 'ç€‘å¸ƒç¾¤'],
        tips: ['å»ºè®®å¸¦ç™»å±±æ–', 'å±±é¡¶æ¸©å·®å¤§ï¼Œæ³¨æ„ä¿æš–', 'æå‰é¢„è®¢å±±é¡¶å¸ç¯·æˆ–å®¢æ ˆ', 'æ³¨æ„é˜²æ™’'],
        itinerary: [
            {
                day: 1,
                title: 'é¾™å±±æ‘ - é‡‘é¡¶',
                distance: '18km',
                time: '8å°æ—¶',
                ascent: '+1200m',
                desc: 'ä»é¾™å±±æ‘ç™»å±±å£å‡ºå‘ï¼Œæ²¿çŸ³é˜¶è€Œä¸Šï¼Œé€”ç»è§‚éŸ³å®•ã€ç´«æå®«',
                waypoints: [
                    { name: 'é¾™å±±æ‘ç™»å±±å£', time: '08:00', altitude: '800m', desc: 'èµ·ç‚¹ï¼Œæ£€æŸ¥è£…å¤‡ï¼Œå¼€å§‹ç™»å±±' },
                    { name: 'è§‚éŸ³å®•', time: '10:30', altitude: '1200m', desc: 'ç¬¬ä¸€ä¸ªä¼‘æ¯ç‚¹ï¼Œå¯è¡¥å……é¥®ç”¨æ°´' },
                    { name: 'ç´«æå®«', time: '13:00', altitude: '1500m', desc: 'åˆé¤ä¼‘æ¯ç‚¹ï¼Œæœ‰å°å–éƒ¨' },
                    { name: 'å‘äº‘ç•Œ', time: '15:30', altitude: '1800m', desc: 'å¼€å§‹è¿›å…¥é«˜å±±è‰ç”¸åŒºåŸŸ' },
                    { name: 'é‡‘é¡¶', time: '18:00', altitude: '1918m', desc: 'æ‰è¥çœ‹æ—¥è½ï¼Œå»ºè®®æå‰é¢„è®¢å¸ç¯·' }
                ],
                notes: ['å‰åŠæ®µä¸ºå°é˜¶è·¯ï¼Œæ³¨æ„è†ç›–ä¿æŠ¤', 'å‘äº‘ç•Œåæ‰‹æœºä¿¡å·è¾ƒå¼±', 'é‡‘é¡¶é£å¤§ï¼Œæ³¨æ„ä¿æš–'],
                photos: ['ğŸŒ„', 'â›º', 'ğŸŒ…']
            },
            {
                day: 2,
                title: 'é‡‘é¡¶ - ç™½é¹¤å³°',
                distance: '15km',
                time: '6å°æ—¶',
                ascent: '+300m',
                desc: 'æ—©èµ·è§‚æ—¥å‡ºï¼Œç©¿è¶Šé«˜å±±è‰ç”¸ï¼Œä½“éªŒäº‘æµ·ç¾æ™¯',
                waypoints: [
                    { name: 'é‡‘é¡¶æ—¥å‡º', time: '05:30', altitude: '1918m', desc: 'æœ€ä½³æ—¥å‡ºè§‚èµç‚¹' },
                    { name: 'åŠé©¬æ¡©', time: '09:00', altitude: '1800m', desc: 'è‘—åè‰ç”¸æ™¯è§‚ç‚¹' },
                    { name: 'ç»æœ›å¡', time: '11:30', altitude: '1650m', desc: 'é™¡å³­ä¸‹å¡ï¼Œæ³¨æ„å®‰å…¨' },
                    { name: 'ç™½é¹¤å³°', time: '14:00', altitude: '1700m', desc: 'ç¬¬äºŒæ™šéœ²è¥åœ°' }
                ],
                notes: ['æ—¥å‡ºæ—¶é—´çº¦5:30ï¼Œæå‰30åˆ†é’Ÿåˆ°è¾¾', 'è‰ç”¸è·¯æ®µæ³¨æ„é˜²æ™’', 'ç»æœ›å¡è¾ƒé™¡ï¼Œå»ºè®®ä½¿ç”¨ç™»å±±æ–'],
                photos: ['ğŸŒ…', 'ğŸŒ¾', 'â˜ï¸']
            },
            {
                day: 3,
                title: 'ç™½é¹¤å³° - æ²ˆå­æ‘',
                distance: '12km',
                time: '5å°æ—¶',
                ascent: '-1500m',
                desc: 'ä¸‹å±±è·¯æ®µï¼Œç»è¿‡ç€‘å¸ƒç¾¤ï¼Œè¿”å›å±±ä¸‹',
                waypoints: [
                    { name: 'ç™½é¹¤å³°å‡ºå‘', time: '08:00', altitude: '1700m', desc: 'å¼€å§‹ä¸‹å±±' },
                    { name: 'ä¹é¾™å±±', time: '10:00', altitude: '1200m', desc: 'è§‚æ™¯å°ï¼Œå¯ä¿¯ç°å±±è°·' },
                    { name: 'é¾™æ½­ç€‘å¸ƒ', time: '11:30', altitude: '600m', desc: 'ç€‘å¸ƒç¾¤æ™¯åŒºï¼Œå¯æˆæ°´ä¼‘æ¯' },
                    { name: 'æ²ˆå­æ‘', time: '13:00', altitude: '200m', desc: 'ç»ˆç‚¹ï¼Œè¡Œç¨‹ç»“æŸ' }
                ],
                notes: ['ä¸‹å±±æ—¶æ³¨æ„è†ç›–ä¿æŠ¤', 'ç€‘å¸ƒåŒºåŸŸè·¯æ»‘ï¼Œå°å¿ƒè¡Œèµ°', 'åˆ°è¾¾åå¯åœ¨æ‘é‡Œç”¨é¤ä¼‘æ¯'],
                photos: ['ğŸ’§', 'ğŸ”ï¸', 'ğŸ‰']
            }
        ],
        equipmentList: [
            { category: 'æœè£…', items: ['å†²é”‹è¡£', 'é€Ÿå¹²è¡£è£¤', 'æŠ“ç»’è¡£', 'ç™»å±±é‹'] },
            { category: 'è£…å¤‡', items: ['ç™»å±±åŒ…(40-50L)', 'ç™»å±±æ–', 'å¤´ç¯', 'ç¡è¢‹'] },
            { category: 'é£Ÿå“', items: ['å‹ç¼©é¥¼å¹²', 'èƒ½é‡æ£’', 'æ°´æœ', 'ç”µè§£è´¨é¥®æ–™'] }
        ]
    },
    {
        id: 4,
        image: 'ğŸ•ï¸',
        title: 'è´¡å˜å±±å¤§ç¯çº¿',
        difficulty: 'é«˜éš¾åº¦',
        difficultyLevel: 'hard',
        days: '7å¤©',
        distance: '110km',
        altitude: '4800m',
        author: 'é›ªåŸŸè¡Œè€…',
        avatar: 'ğŸ‘¨â€ğŸ¦°',
        likes: 1543,
        views: 7234,
        location: 'å››å·Â·åº·å®š',
        season: '5-6æœˆ,9-10æœˆ'
    },
    {
        id: 5,
        image: 'ğŸŒ„',
        title: 'ç‹¼å¡”Cçº¿ç©¿è¶Š',
        difficulty: 'é«˜éš¾åº¦',
        difficultyLevel: 'hard',
        days: '9å¤©',
        distance: '130km',
        altitude: '3800m',
        author: 'æ²™æ¼ ä¹‹é¹°',
        avatar: 'ğŸ§”',
        likes: 987,
        views: 5432,
        location: 'æ–°ç–†Â·æ˜Œå‰',
        season: '7-8æœˆ'
    },
    {
        id: 6,
        image: 'ğŸŒ¿',
        title: 'è™è·³å³¡å¾’æ­¥',
        difficulty: 'ç®€å•',
        difficultyLevel: 'easy',
        days: '2å¤©',
        distance: '28km',
        altitude: '2600m',
        author: 'ä¸½æ±Ÿè€å¼ ',
        avatar: 'ğŸ‘¨â€ğŸ¦³',
        likes: 3421,
        views: 18765,
        location: 'äº‘å—Â·ä¸½æ±Ÿ',
        season: 'å…¨å¹´'
    },
    {
        id: 7,
        image: 'ğŸï¸',
        title: 'å°¼æ³Šå°”ABCå¤§ç¯çº¿',
        difficulty: 'ä¸­ç­‰',
        difficultyLevel: 'medium',
        days: '10å¤©',
        distance: '85km',
        altitude: '4130m',
        author: 'å–œé©¬æ‹‰é›…å‘å¯¼',
        avatar: 'ğŸ‘³',
        likes: 2876,
        views: 15432,
        location: 'å°¼æ³Šå°”Â·åšå¡æ‹‰',
        season: '3-5æœˆ,10-11æœˆ'
    },
    {
        id: 8,
        image: 'ğŸ—»',
        title: 'å››å§‘å¨˜å±±é•¿åªæ²Ÿ',
        difficulty: 'ç®€å•',
        difficultyLevel: 'easy',
        days: '1å¤©',
        distance: '15km',
        altitude: '3200m',
        author: 'èœ€å±±ä¹‹ç‹',
        avatar: 'ğŸ‘¨â€ğŸŒ¾',
        likes: 2543,
        views: 13245,
        location: 'å››å·Â·å°é‡‘',
        season: '5-10æœˆ'
    }
])

const routeFilter = ref<'all' | 'easy' | 'medium' | 'hard'>('all')
const filteredRoutes = computed(() => {
    return routeFilter.value === 'all'
        ? routes.value
        : routes.value.filter(route => route.difficultyLevel === routeFilter.value)
})

const setRouteFilter = (filter: any) => {
    routeFilter.value = filter
}
</script>

<template>
    <div class="w-full max-w-md mx-auto min-h-screen bg-slate-50">
        <!-- {/* é¡¶éƒ¨æ  */} -->
        <div class="bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-5 pt-10 pb-6">
            <div class="flex items-center justify-between mb-5">
                <h1 class="text-xl font-bold">å¾’æ­¥è·¯çº¿</h1>
                <div class="flex items-center gap-2">
                    <button class="bg-white/20 backdrop-blur-sm p-2 rounded-lg active:scale-95 transition-all">
                        <MapPin :size="20" />
                    </button>
                </div>
            </div>

            <!-- {/* æœç´¢æ  */} -->
            <div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2.5 flex items-center">
                <input type="text" placeholder="æœç´¢ç›®çš„åœ°ã€è·¯çº¿åç§°..."
                    class="flex-1 bg-transparent placeholder-white/70 outline-none text-white text-sm" />
                <Compass :size="18" class="text-white/70" />
            </div>
        </div>

        <!-- {/* ç­›é€‰æ ‡ç­¾ */} -->
        <div class="px-5 py-4 bg-white shadow-sm">
            <div class="flex items-center gap-2 overflow-x-auto scrollbar-hide">

                <button v-for="option in filterOptions" :key="option.value" @click="() => setRouteFilter(option.value)"
                    :class="`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-all active:scale-95 ${routeFilter === option.value
                        ? 'bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md'
                        : 'bg-slate-100 text-slate-600'
                        }`">
                    {{ option.label }}
                </button>

            </div>
        </div>

        <!-- {/* è·¯çº¿ç»Ÿè®¡ */} -->
        <div class="px-5 py-3 flex items-center justify-between">
            <span class="text-sm text-slate-600">
                å…±æ‰¾åˆ° <span class="font-bold text-emerald-600">{{ filteredRoutes.length }}</span> æ¡è·¯çº¿
            </span>
            <button class="flex items-center gap-1 text-sm text-slate-600 active:scale-95 transition-all">
                <TrendingUp :size="14" />
                <span>çƒ­åº¦æ’åº</span>
            </button>
        </div>

        <!-- {/* è·¯çº¿åˆ—è¡¨ */} -->
        <div class="px-5 pb-20 space-y-3">

            <div v-for="route in filteredRoutes" :key="route.id"
                class="bg-white rounded-2xl shadow-lg overflow-hidden active:scale-95 transition-all">
                <!-- {/* è·¯çº¿å›¾ç‰‡åŒº */} -->
                <div
                    class="relative h-40 bg-gradient-to-br from-emerald-400 via-teal-500 to-cyan-500 flex items-center justify-center text-7xl">
                    {{ route.image }}
                    <div
                        class="absolute top-3 left-3 bg-black/30 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-lg flex items-center gap-1">
                        <MapPin :size="12" />
                        {{ route.location }}
                    </div>
                    <div
                        class="absolute top-3 right-3 bg-black/30 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-lg">
                        {{ route.season }}
                    </div>
                    <div :class="`absolute bottom-3 left-3 text-xs px-2.5 py-1 rounded-full font-medium ${route.difficultyLevel === 'easy' ? 'bg-green-500 text-white' : route.difficultyLevel === 'medium'
                        ? 'bg-orange-500 text-white' : 'bg-red-500 text-white'}`">
                        {{ route.difficulty }}
                    </div>
                </div>

                <!-- {/* è·¯çº¿ä¿¡æ¯ */} -->
                <div class="p-4">
                    <h3 class="font-bold text-slate-800 text-base mb-3">{{ route.title }}</h3>
                    <!-- {/* å…³é”®æ•°æ® */} -->
                    <div class="grid grid-cols-3 gap-3 mb-3 pb-3 border-b border-slate-100">
                        <div class="text-center">
                            <div class="text-xs text-slate-500 mb-0.5">æ—¶é•¿</div>
                            <div class="text-sm font-bold text-slate-800">{{ route.days }}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-slate-500 mb-0.5">è·ç¦»</div>
                            <div class="text-sm font-bold text-slate-800">{{ route.distance }}</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-slate-500 mb-0.5">æœ€é«˜æµ·æ‹”</div>
                            <div class="text-sm font-bold text-slate-800">{{ route.altitude }}</div>
                        </div>
                    </div>

                    <!-- {/* ä½œè€…å’Œäº’åŠ¨ */} -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2 text-sm text-slate-600">
                            <span>{{ route.avatar }}</span>
                            <span>{{ route.author }}</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <button class="flex items-center gap-1 text-slate-400 active:scale-95 transition-all">
                                <Heart :size="16" />
                                <span class="text-xs">{{ route.likes }}</span>
                            </button>
                            <button class="flex items-center gap-1 text-slate-400 active:scale-95 transition-all">
                                <Share2 :size="16" />
                            </button>
                            <button @click="$router.push('/w/courseDetail')" class="bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-4 py-1.5 rounded-lg
                                text-xs font-medium shadow-md active:scale-95 transition-all">
                                æŸ¥çœ‹è¯¦æƒ…
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>